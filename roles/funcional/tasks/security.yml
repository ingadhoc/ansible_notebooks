---
- name: Firewall | Configurar UFW con políticas seguras por defecto
  tags: ufw, security
  become: true
  block:
    - name: Firewall | Denegar todo el tráfico entrante por defecto
      community.general.ufw:
        default: deny
        direction: incoming

    - name: Firewall | Permitir todo el tráfico saliente por defecto
      community.general.ufw:
        default: allow
        direction: outgoing

    - name: Firewall | Permitir conexiones SSH entrantes (común para desarrolladores)
      community.general.ufw:
        rule: allow
        direction: in
        port: '22'
        proto: tcp
        comment: 'Allow incoming SSH for remote access'

    - name: Firewall | Activar y habilitar el servicio UFW
      community.general.ufw:
        state: enabled
