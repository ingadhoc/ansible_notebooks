- name: Idiomas | Instalar paquetes de idioma para Ubuntu
  tags: language
  ansible.builtin.apt:
    name: "{{ language_packs_ubuntu }}"
    state: present
  when: ansible_facts['distribution'] == 'Ubuntu'

- name: Idiomas | Instalar paquetes de idioma para Debian
  tags: language
  ansible.builtin.apt:
    name: "{{ language_packs_debian }}"
    state: present
  when: ansible_facts['distribution'] == 'Debian'

- name: Idiomas | Asegurar que el locale 'es_ES.UTF-8' esté generado
  tags: language
  community.general.locale_gen:
    name: es_ES.UTF-8
    state: present

- name: Idiomas | Configurar distribuciones de teclado para el usuario
  tags: language, gnome
  become: true
  become_user: "{{ remote_regular_user }}" # Usamos la variable estándar
  community.general.dconf:
    key: "/org/gnome/desktop/input-sources/sources"
    value: "{{ keyboard_layouts }}" # Usamos la variable
    state: present
